<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="管道工程软件 管径计算 管道阻力计算 管道尺寸查询 管道重量计算 管道绝热计算 管道保温计算 水蒸气管道压降温降计算 水和水蒸气物性查询">
    <title>安全阀-Yangshu</title>
    <script src="./src/coolprop.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <script>
        function iePrompt() {
             if(!!window.ActiveXObject ||"ActiveXObject" in window){
                document.write('<p style="background-color: beige; padding: 10px;">非常抱歉，本站不兼容IE浏览器，您需要更换其它浏览器。</p>')
             }
         }
         iePrompt();
    </script>
    <div id="sidebar">
        <h1> <a href="./">Yang shu</a></h1>
        <h2>目录</h2>
        <ul>
            <li><a href="./">说明</a></li>
            <li><a href="pipe.html">管道设计</a></li>
            <li><a href="props.html">物性</a></li>
            <li><a href="waterprops.html">水和水蒸汽物性</a></li>
            <li><a href="reliefvalve.html">蒸汽安全阀</a></li>
        </ul>
        <h2>其它</h2>
        <ul>
            <li><a href="javascript:;" onclick="javascript:addFavorite('yangshu-工程计算软件','https://yangshu.gitee.io')" title="收藏本站到收藏夹">收藏本站</a></li>
            <li><a href="contact.html">联系</a></li>
            <li><a href="changelog.html">更新日志</a></li>
            <li>
                <script type="text/javascript">
                    var cnzz;
                    if (window.location.host == "yangshu.gitee.io") {
                        cnzz = "https://v1.cnzz.com/z_stat.php?id=1279093109&web_id=1279093109";
                    } else {
                        cnzz = "https://v1.cnzz.com/z_stat.php?id=1280145546&web_id=1280145546";
                    }
                    document.write('<script type="text/javascript" src="'+ cnzz +'"><\/script>')
                </script>
            </li>
        </ul>
    </div>
    <div id="tab">
        <h2 id="tab-title">蒸汽安全阀</h2>
        <div id="tab-panel">
            <p>
                <label>泄放量<br>kg/h</label>
                <input type="text" name="w">
            </p>
            <p>
                <label>泄放压力<br>MPa(a)</label>
                <input type="text" name="pf">
            </p>
            <p>
                <label>泄放装置出口侧压力<br>MPa(a)</label>
                <input type="text" name="po">
            </p>
            <p>
                <label>泄放温度<br>℃</label>
                <input type="text" name="tf">
            </p>
            <p>
                <label>采用标准</label>
                <select name="stdCode">
                    <option>TSG 11</option>
                </select>
            </p>
            <button onclick="reliefvalve()">计算</button>
        </div>
    </div>
<script>
    function reliefvalve() {
        var w = Number(document.getElementsByName("w")[0].value);
        var po = Number(document.getElementsByName("po")[0].value);
        var pf = Number(document.getElementsByName("pf")[0].value);
        var tf = Number(document.getElementsByName("tf")[0].value);
        var stdIndex = document.getElementsByName("stdCode")[0].selectedIndex;
        
        var a;

        switch (stdIndex) {
            case 0:
                var vg = 1 / Module.PropsSI("D","P",pf * 1e6,"T",tf + 273.15,"Water");
                var vb = 1 / Module.PropsSI("D","P",pf * 1e6,"Q",1,"Water");
                var k;
                if (pf <= 12) {
                    k = Math.sqrt(vb / vg);
                }else{
                    k = Math.sqrt(2.1 / (10.2 * (pf - 0.1) + 1) * vg);
                }
                a = w / 0.235 / (10.2 * (pf - 0.1) + 1) / k;
                break;
        
            default:
                break;
        }

        var d = Math.sqrt(4 * a / Math.PI);

        var resEl = document.createElement("div");
        [["安全阀流道面积","mm2",a],["安全阀流道直径","mm",d]].forEach(el => {
            var p = document.createElement("p");
            var label = document.createElement("label");
            label.innerText = el[0] + "\n" + el[1];
            var span = document.createElement("span");
            span.innerText = el[2];
            p.appendChild(label);
            p.appendChild(span);
            resEl.appendChild(p);
        })
        document.querySelector("#tab-panel").appendChild(resEl);
    }
</script>
</body>
</html>