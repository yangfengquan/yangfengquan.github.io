<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="管道材料计算 管道重量计算 管径计算 管道阻力计算 管道水力计算 物性查询 物质物理性质">
    <title>工程计算</title>
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?d319312b017fe4df29c750d1c27439e0";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
    </script>   
</head>
<body>
    <div id="menu">
        <ul id="menu-ul">
            <li><a href="./"><b>工程计算</b></a>
        </ul>
    </div>
    <div id="page"></div>
   <script>
    const html_pages_data = {
        pipe_diameter_velocity: {
            title: "流速>管径",
            inputs: {
                flowrate_volume: {title: "流量", unit: "m3/h", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                velocity: {title: "流速", unit: "m/s", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"}
            },
            results: {
                di: {title: "内径", unit: "mm"}
            },
            options: {
                
            },
            multiple_rows: true,
            has_total_row: false
        },
        pipe_diameter_drop_pressure: {
            title: "压降>管径",
            inputs: {
                flowrate_volume: {title: "流量", unit: "m3/h", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                density: {title: "密度", unit: "kg/m3", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                viscosity: {title: "运动粘度", unit: "m2/s", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                length: {title: "管长", unit: "m", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                drop_pressure: {title: "压降", unit: "MPa", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"}
            },
            results: {
                di: {title: "内径", unit: "mm"}
            },
            options: {
                
            },
            multiple_rows: true,
            has_total_row: false
        },
        pipe_drop_pressure: {
            title: "阻力",
            inputs: {
                pipe: {title: "管道类别", tagname: "select", method: yrun, event: "change"},
                di: {title: "管道内径", unit: "mm", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                length: {title: "长度", unit: "m", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},                       
                flowrate_mass: {title: "流量", unit: "kg/h", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                density: {title: "密度", unit: "kg/m3", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                viscosity: {title: "运动粘度", unit: "m2/s", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                elbow45: {title: "45°弯头", unit: "个", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                elbow90: {title: "90°弯头", unit: "个", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                elbow90_x: {title: "90°斜接弯头", unit: "个", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                elbow180: {title: "180°弯头", unit: "个", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                globeValve: {title: "截止阀（全开）", unit: "个", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                angleValve: {title: "角阀（全开）", unit: "个", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                gateValve: {title: "闸阀（全开）", unit: "个", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                plugValve: {title: "旋塞阀（全开）", unit: "个", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                butterflyValve: {title: "蝶阀（全开）", unit: "个", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                checkValve0: {title: "旋启式止回阀", unit: "个", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                checkValve1: {title: "升降式止回阀", unit: "个", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                footValve: {title: "底阀", unit: "个", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
            },
            results: {
                velocity: {title: "流速", unit: "m/s"},
                velocity: {title: "直管阻力", unit: "MPa"},
                velocity: {title: "局部阻力", unit: "MPa"},
                velocity: {title: "总阻力", unit: "MPa"}
            },
            options: {
                pipe:[
                        {value: "0.0000075", text: "无缝黄铜、铜及铅管"},
                        {value: "0.000075", text: "操作中基本无腐蚀的无缝钢管"},
                        {value: "0.00015", text: "操作中有轻度腐蚀的无缝钢管"},
                        {value: "0.00035", text: "操作中有显著腐蚀的无缝钢管"},
                        {value: "0.00033", text: "钢板卷管"},
                        {value: "0.000675", text: "铸铁管"},
                        {value: "0.00000575", text: "干净的玻璃管"}
                    ]
            },
            multiple_rows: true,
            has_total_row: true
        },
        pipe_weight: {
            title: "钢管重量",
            inputs: {
                do_: {title: "外径", unit: "mm", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                thk: {title: "壁厚", unit: "mm", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                length: {title: "长度", unit: "m", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"}
            },
            results: {
                per_tube_weight: {title: "单位长度钢管自重", unit: "kg/m"},
                total_tube_weight: {title: "钢管总自重", unit: "kg"},
                per_water_weight: {title: "单位长度充水水重", unit: "kg/m"},
                total_water_weight: {title: "总水重", unit: "kg"},
                total_weight: {title: "总重", unit: "kg"}
            },
            options: {
                
            },
            multiple_rows: true,
            has_total_row: true
        },
        insul_pipe_weight: {
            title: "保温管道重量",
            inputs: {
                do_: {title: "外径", unit: "mm", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                thk: {title: "壁厚", unit: "mm", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                insul_thk: {title: "保温厚", unit: "mm", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                insul_density: {title: "保温密度", unit: "mm", tagname: "input", type: "number", default_value: 200,  method: yrun, event: "change"},
                clad_thk: {title: "保护层厚", unit: "mm", tagname: "input", type: "number", default_value: 0.6,  method: yrun, event: "change"},
                clad_density: {title: "保护层密度", unit: "mm", tagname: "input", type: "number", default_value: 2720,  method: yrun, event: "change"},
                length: {title: "长度", unit: "m", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"}
            },
            results: {
                per_weight: {title: "单重", unit: "kg"},
                total_weight: {title: "总重", unit: "kg"}
            },
            options: {
                
            },
            multiple_rows: true,
            has_total_row: true
        },
        anticorrosion_material: {
            title: "防腐材料量",
            inputs: {
                do_: {title: "管道外径", unit: "mm", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                length: {title: "长度", unit: "m", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"}
            },
            results: {
                anticorrosion_area: {title: "刷漆量", unit: "m2"},
            },
            options: {
                
            },
            multiple_rows: true,
            has_total_row: true
        },
        insulation_material: {
            title: "保温材料量",
            inputs: {
                do_: {title: "外径", unit: "mm", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                insul_thk: {title: "保温厚", unit: "mm", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                length: {title: "长度", unit: "m", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"}
            },
            results: {
                insul_volume: {title: "保温材料量", unit: "m3"},
                clad_area: {title: "保护层材料量", unit: "m2"},
            },
            options: {
                
            },
            multiple_rows: true,
            has_total_row: true
        },
        property: {
            title: "物性",
            inputs: {
                fluid_name: {title: "名称", tagname: "select", method: yrun, event: "change"},
                temperture: {title: "温度", unit: "℃", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                pressure: {title: "压力", unit: "MPa(a)", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                density: {title: "密度", unit: "kg/m3", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                enthalpy: {title: "焓值", unit: "kj/kg", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                entropy: {title: "比熵", unit: "kj/kg/K", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                internal_energy: {title: "kj/kg", unit: "m", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"},
                vapor_quality: {title: "干度", unit: "m", tagname: "input", type: "number", default_value: '',  method: yrun, event: "change"}
            },
            results: {
                viscosity: {title: "粘度", unit: "m2/s"},
                z: {title: "压缩系数", unit: ""},
            },
            options: {
                fluid_name: [
                    {value: "1-Butene", text: "1-Butene"},
                    {value: "Acetone", text: "Acetone"},
                    {value: "Air", text: "Air"},
                    {value: "Ammonia", text: "Ammonia"},
                    {value: "Argon", text: "Argon"},
                    {value: "Benzene", text: "Benzene"},
                    {value: "CarbonDioxide", text: "CarbonDioxide"},
                    {value: "CarbonMonoxide", text: "CarbonMonoxide"},
                    {value: "CarbonylSulfide", text: "CarbonylSulfide"},
                    {value: "CycloHexane", text: "CycloHexane"},
                    {value: "CycloPropane", text: "CycloPropane"},
                    {value: "Cyclopentane", text: "Cyclopentane"},
                    {value: "D4", text: "D4"},
                    {value: "D5", text: "D5"},
                    {value: "D6", text: "D6"},
                    {value: "Deuterium", text: "Deuterium"},
                    {value: "Dichloroethane", text: "Dichloroethane"},
                    {value: "DiethylEther", text: "DiethylEther"},
                    {value: "DimethylCarbonate", text: "DimethylCarbonate"},
                    {value: "DimethylEther", text: "DimethylEther"},
                    {value: "Ethane", text: "Ethane"},
                    {value: "Ethanol", text: "Ethanol"},
                    {value: "EthylBenzene", text: "EthylBenzene"},
                    {value: "Ethylene", text: "Ethylene"},
                    {value: "EthyleneOxide", text: "EthyleneOxide"},
                    {value: "Fluorine", text: "Fluorine"},
                    {value: "HFE143m", text: "HFE143m"},
                    {value: "HeavyWater", text: "HeavyWater"},
                    {value: "Helium", text: "Helium"},
                    {value: "Hydrogen", text: "Hydrogen"},
                    {value: "HydrogenChloride", text: "HydrogenChloride"},
                    {value: "HydrogenSulfide", text: "HydrogenSulfide"},
                    {value: "IsoButane", text: "IsoButane"},
                    {value: "IsoButene", text: "IsoButene"},
                    {value: "Isohexane", text: "Isohexane"},
                    {value: "Isopentane", text: "Isopentane"},
                    {value: "Krypton", text: "Krypton"},
                    {value: "MD2M", text: "MD2M"},
                    {value: "MD3M", text: "MD3M"},
                    {value: "MD4M", text: "MD4M"},
                    {value: "MDM", text: "MDM"},
                    {value: "MM", text: "MM"},
                    {value: "Methane", text: "Methane"},
                    {value: "Methanol", text: "Methanol"},
                    {value: "MethylLinoleate", text: "MethylLinoleate"},
                    {value: "MethylLinolenate", text: "MethylLinolenate"},
                    {value: "MethylOleate", text: "MethylOleate"},
                    {value: "MethylPalmitate", text: "MethylPalmitate"},
                    {value: "MethylStearate", text: "MethylStearate"},
                    {value: "Neon", text: "Neon"},
                    {value: "Neopentane", text: "Neopentane"},
                    {value: "Nitrogen", text: "Nitrogen"},
                    {value: "NitrousOxide", text: "NitrousOxide"},
                    {value: "Novec649", text: "Novec649"},
                    {value: "OrthoDeuterium", text: "OrthoDeuterium"},
                    {value: "OrthoHydrogen", text: "OrthoHydrogen"},
                    {value: "Oxygen", text: "Oxygen"},
                    {value: "ParaDeuterium", text: "ParaDeuterium"},
                    {value: "ParaHydrogen", text: "ParaHydrogen"},
                    {value: "Propylene", text: "Propylene"},
                    {value: "Propyne", text: "Propyne"},
                    {value: "R11", text: "R11"},
                    {value: "R113", text: "R113"},
                    {value: "R114", text: "R114"},
                    {value: "R115", text: "R115"},
                    {value: "R116", text: "R116"},
                    {value: "R12", text: "R12"},
                    {value: "R123", text: "R123"},
                    {value: "R1233zd(E)", text: "R1233zd(E)"},
                    {value: "R1234yf", text: "R1234yf"},
                    {value: "R1234ze(E)", text: "R1234ze(E)"},
                    {value: "R1234ze(Z)", text: "R1234ze(Z)"},
                    {value: "R124", text: "R124"},
                    {value: "R125", text: "R125"},
                    {value: "R13", text: "R13"},
                    {value: "R134a", text: "R134a"},
                    {value: "R13I1", text: "R13I1"},
                    {value: "R14", text: "R14"},
                    {value: "R141b", text: "R141b"},
                    {value: "R142b", text: "R142b"},
                    {value: "R143a", text: "R143a"},
                    {value: "R152A", text: "R152A"},
                    {value: "R161", text: "R161"},
                    {value: "R21", text: "R21"},
                    {value: "R218", text: "R218"},
                    {value: "R22", text: "R22"},
                    {value: "R227EA", text: "R227EA"},
                    {value: "R23", text: "R23"},
                    {value: "R236EA", text: "R236EA"},
                    {value: "R236FA", text: "R236FA"},
                    {value: "R245ca", text: "R245ca"},
                    {value: "R245fa", text: "R245fa"},
                    {value: "R32", text: "R32"},
                    {value: "R365MFC", text: "R365MFC"},
                    {value: "R40", text: "R40"},
                    {value: "R404A", text: "R404A"},
                    {value: "R407C", text: "R407C"},
                    {value: "R41", text: "R41"},
                    {value: "R410A", text: "R410A"},
                    {value: "R507A", text: "R507A"},
                    {value: "RC318", text: "RC318"},
                    {value: "SES36", text: "SES36"},
                    {value: "SulfurDioxide", text: "SulfurDioxide"},
                    {value: "SulfurHexafluoride", text: "SulfurHexafluoride"},
                    {value: "Toluene", text: "Toluene"},
                    {value: "Water", text: "Water"},
                    {value: "Xenon", text: "Xenon"},
                    {value: "cis-2-Butene", text: "cis-2-Butene"},
                    {value: "m-Xylene", text: "m-Xylene"},
                    {value: "n-Butane", text: "n-Butane"},
                    {value: "n-Decane", text: "n-Decane"},
                    {value: "n-Dodecane", text: "n-Dodecane"},
                    {value: "n-Heptane", text: "n-Heptane"},
                    {value: "n-Hexane", text: "n-Hexane"},
                    {value: "n-Nonane", text: "n-Nonane"},
                    {value: "n-Octane", text: "n-Octane"},
                    {value: "n-Pentane", text: "n-Pentane"},
                    {value: "n-Propane", text: "n-Propane"},
                    {value: "n-Undecane", text: "n-Undecane"},
                    {value: "o-Xylene", text: "o-Xylene"},
                    {value: "p-Xylene", text: "p-Xylene"},
                    {value: "trans-2-Butene", text: "trans-2-Butene"}
                ]
            },
            multiple_rows: true,
            has_total_row: false
        }
    }

    createMenu();
    window.addEventListener("load", page(), false);
    window.addEventListener("hashchange", page, false);
    var currentUrl = '';
    function page() {
        currentUrl = location.hash.slice(1) || '/';
        let page_ele = document.getElementById("page");
        page_ele.innerHTML = '';
        if (screen.width > 800) {
            page_ele.appendChild(createPageForBigScreen(html_pages_data[currentUrl]));
        } else {
            page_ele.appendChild(createPageForSmallScreen(html_pages_data[currentUrl]));
        }
    }

    function createMenu() {
        const menu0 = [
            {text: "管道", pagesBegin: 0},
            {text: "物性", pagesBegin: 7}
        ];
        let curId = 0;
        let menu_ele = document.getElementById("menu-ul");
        let pLi_ele;
        let ul_ele;
        for (const key in html_pages_data) {
            if (Object.hasOwnProperty.call(html_pages_data, key)) {
                
                menu0.forEach(item => {
                    if (item.pagesBegin == curId) {
                        pLi_ele = document.createElement("li");
                        ul_ele = document.createElement("ul");
                        ul_ele.innerText = item.text;
                        pLi_ele.appendChild(ul_ele);
                        menu_ele.appendChild(pLi_ele);
                    }
                });

                let li_ele = document.createElement("li");
                let a_ele = document.createElement("a");
                a_ele.href = "#" + key;
                a_ele.innerText = html_pages_data[key].title;
                li_ele.appendChild(a_ele);
                ul_ele.appendChild(li_ele);
            }
            curId++;
        }
    }

    function createPageForBigScreen(html_page_data) {
        let page_ele = document.createElement("div");

        let page_title = document.createElement("h3");
        page_title.innerText = html_page_data.title;
        page_ele.appendChild(page_title);

        page_ele.appendChild(createFormTable(html_page_data));


        let p_ele = document.createElement("p");
        let button_ele = document.createElement("button");
        button_ele.innerText = "添加";
        button_ele.addEventListener("click", addRow);
        p_ele.appendChild(button_ele);
        page_ele.appendChild(p_ele);

        return page_ele;
    }

    function createPageForSmallScreen(html_page_data) {
        let page_ele = document.createElement("div");

        let page_title = document.createElement("h3");
        page_title.innerText = html_page_data.title;
        page_ele.appendChild(page_title);

        page_ele.appendChild(createFormDiv(html_page_data));


        let p_ele = document.createElement("p");
        let button_ele = document.createElement("button");
        button_ele.innerText = "计算";
        button_ele.addEventListener("click", yrun);
        p_ele.appendChild(button_ele);
        page_ele.appendChild(p_ele);

        return page_ele;
    }

    function createFormTable(html_page_data) {
        let table_ele = document.createElement("table");
        let thead_ele = document.createElement("thead");
        let tbody_ele = document.createElement("tbody");
        let thead_tr_ele = document.createElement("tr");
        let tbody_tr_ele = document.createElement("tr");
        thead_ele.appendChild(thead_tr_ele);
        tbody_ele.appendChild(tbody_tr_ele);
        table_ele.appendChild(thead_ele);
        table_ele.appendChild(tbody_ele);
        for (const key in html_page_data.inputs) {
            if (Object.hasOwnProperty.call(html_page_data.inputs, key)) {
                const element = html_page_data.inputs[key];
                let th_ele = document.createElement("th");
                let td_ele = document.createElement("td");
                th_ele.innerText = element.title + "\n" + (element.unit || '');
                let input_ele = document.createElement(element.tagname);
                input_ele.name = key;
                input_ele.addEventListener(element.event, element.method);
                if (element.tagname == "select") {
                    html_page_data.options[key].forEach(option => {
                        let option_ele =document.createElement("option");
                        option_ele.value = option.value;
                        option_ele.innerText = option.text;
                        input_ele.appendChild(option_ele);
                    });
                }
                else if (element.tagname == "input") {
                    input_ele.type = element.type;
                    input_ele.value = element.value;
                }

                
                thead_tr_ele.appendChild(th_ele);
                td_ele.appendChild(input_ele);
                tbody_tr_ele.appendChild(td_ele);
            }
        }

        for (const key in html_page_data.results) {
            if (Object.hasOwnProperty.call(html_page_data.results, key)) {
                const element = html_page_data.results[key];
                let th_ele = document.createElement("th");
                let td_ele = document.createElement("td");
                th_ele.innerHTML = element.title + "<br>" + element.unit;
                
                thead_tr_ele.appendChild(th_ele);
                tbody_tr_ele.appendChild(td_ele);
            }
        }

        //删除按钮
        if (html_page_data.multiple_rows) {
            thead_tr_ele.appendChild(document.createElement("th"));
            let td_ele = document.createElement("td");
            let button_ele = document.createElement("button");
            button_ele.innerText = "删除";
            button_ele.addEventListener("click", delRow);

            td_ele.appendChild(button_ele);
            tbody_tr_ele.appendChild(td_ele);
        }

        if (html_page_data.has_total_row) {
            let tfoot_ele = document.createElement("tfoot");
            let tr_ele = document.createElement("tr");
            tfoot_ele.appendChild(tr_ele);
            table_ele.appendChild(tfoot_ele);
            for (let i = 0; i < html_page_data.inputs.length + html_page_data.results.length; i++) {
                tr_ele.appendChild(document.createElement("td"));
            }
            if (html_page_data.multiple_rows) {
                tr_ele.appendChild(document.createElement("td"));
            }

            tr_ele.cells[0].innerText = "合计";
        }
        
        return table_ele;
    }

    function createFormDiv(html_page_data) {
        let form_div_ele = document.createElement("div");
        for (const key in html_page_data.inputs) {
            if (Object.hasOwnProperty.call(html_page_data.inputs, key)) {
                const element = html_page_data.inputs[key];
                let p_ele = document.createElement("p");
                let label_ele = document.createElement("label");
                label_ele.innerText = element.title + "\n" + (element.unit || '');
                let input_ele = document.createElement(element.tagname);
                input_ele.name = key;
                //input_ele.addEventListener(element.event, element.method);
                if (element.tagname == "select") {
                    html_page_data.options[key].forEach(option => {
                        let option_ele =document.createElement("option");
                        option_ele.value = option.value;
                        option_ele.innerText = option.text;
                        input_ele.appendChild(option_ele);
                    });
                }
                else if (element.tagname == "input") {
                    input_ele.type = element.type;
                    input_ele.value = element.value;
                }

                p_ele.appendChild(label_ele);
                p_ele.appendChild(input_ele);
                form_div_ele.appendChild(p_ele);
            }
        }

        return form_div_ele;
    }

    function addRow(event) {
        
    }

    function delRow(event) {
        
    }

    function yrun() {
        yRunner.methods[currentUrl]();
    }

    function YRuner() {
        this.methods = {};
    }
    YRuner.prototype.method = function (page, callback) {
        this.methods[page] = callback || function () { };
    };

    var yRunner = new YRuner();

    yRunner.method ("pipe_diameter_velocity", function () {
        alert("未选择功能。");
    });
   </script>
</body>
</html>